<h1>docs/examples/sandbox_fusion_example.rst</h1>
<p>这份文档其实是在教你<strong>如何在一个更安全、更高效的环境下训练会写代码的AI模型</strong>。</p>
<p>之所以你觉得难懂，是因为它省略了很多背景知识。为了让你理解，我把这份文档拆解成一个<strong>“任务清单 (To-Do List)”</strong>。</p>
<p>你可以把这个过程想象成：你要培养一个程序员（AI模型），你需要给他准备教材，并且搭建一个安全的电脑房（沙箱），让他去里面练习写代码，而不是在你自己的电脑上乱搞。</p>
<p>以下是逐步解读的 To-Do List：</p>
<hr />
<h3>✅ 任务 1：理解核心概念（为什么要用这个？）</h3>
<p>在动手之前，你需要明白这篇文档想解决什么问题：
*   <strong>背景</strong>：你在训练一个大模型（LLM），让它学习写代码。
*   <strong>痛点</strong>：
    1.  <strong>不安全</strong>：模型生成的代码可能有病毒、死循环，如果在训练服务器直接运行，很危险。
    2.  <strong>太慢</strong>：验证代码对不对（Reward Stage）很消耗资源，会拖慢训练速度。
*   <strong>解决方案 (Sandbox Fusion)</strong>：这是一个<strong>远程代码沙箱服务</strong>。简单说，就是搞一台专门的、隔离的服务器，专门用来跑模型生成的代码。
*   <strong>好处</strong>：安全（炸了也是炸沙箱），且能提速 10-30%。</p>
<hr />
<h3>✅ 任务 2：准备“教材” (Step 1)</h3>
<p>你要训练模型，得先有数据。
*   <strong>行动</strong>：去下载一个叫 <code>Eurus-2-RL-Data</code> 的数据集。
*   <strong>解释</strong>：这个数据集里包含了数学和代码问题，专门用来教 AI 怎么做题和写代码的。</p>
<hr />
<h3>✅ 任务 3：搭建“专用电脑房” (Step 2)</h3>
<p>既然决定用远程沙箱（Sandbox Fusion），你需要先把这个服务跑起来。
*   <strong>行动</strong>：
    1.  看文档（Sandbox Fusion Documentation）。
    2.  <strong>二选一进行部署</strong>：
        *   <strong>方案 A (本地)</strong>：在你自己的另一台机器上部署。
        *   <strong>方案 B (云端)</strong>：在火山引擎 (Volcengine) 上开个 FaaS 实例。
*   <strong>最终目标</strong>：部署好后，你会得到一个 <strong>URL 地址</strong>（比如 <code>https://192.168.1.100/run_code</code>）。
    *   <em>通俗理解</em>：这就像你建好了电脑房，拿到了电脑房的门牌号。</p>
<hr />
<h3>✅ 任务 4：告诉训练程序“电脑房”在哪 (Step 3)</h3>
<p>现在你有了数据，也有了沙箱服务，你需要修改训练脚本，把它们连起来。
*   <strong>行动</strong>：找到你的训练配置文件，修改以下参数：
    1.  <code>reward_model.sandbox_fusion.url = '你的URL'</code>
        *   <em>解释</em>：填入任务3里拿到的那个地址。告诉模型：“写完代码去这个地址跑测试。”
    2.  <code>reward_model.sandbox_fusion.max_concurrent = 256</code>
        *   <em>解释</em>：设置并发数。告诉模型：“一次最多可以发256个代码片段去测试。”
    3.  <code>reward_model.sandbox_fusion.memory_limit_mb = 1024</code>
        *   <em>解释</em>：设置内存限制。告诉沙箱：“每个代码片段最多只能用 1GB 内存，超了就杀掉。”</p>
<ul>
<li><strong>进阶优化</strong>：<ul>
<li>设置 <code>reward_model.reward_manager = prime</code>。</li>
<li><em>解释</em>：这是一个管理程序，能让验证过程并行处理，速度更快。</li>
</ul>
</li>
</ul>
<hr />
<h3>✅ 任务 5：一键启动 (Example Script)</h3>
<p>所有准备工作都做好了，最后一步就是运行。
*   <strong>行动</strong>：运行官方提供的示例脚本 <code>run_deepseek7b_llm_sandbox_fusion.sh</code>。
*   <strong>注意</strong>：记得把脚本里原本的 URL 换成你自己在“任务 3”里得到的那个 URL。</p>
<hr />
<h3>总结</h3>
<p>这篇文档讲的就是：<strong>别在训练机器上直接跑 AI 生成的代码，去搭建一个叫 Sandbox Fusion 的远程服务，把地址填到配置文件里，这样训练又快又安全。</strong></p>