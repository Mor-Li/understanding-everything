<h1>docs/ascend_tutorial/ascend_sglang_quick_start.rst</h1>
<p>这就为您把这份技术文档“翻译”成一个清晰的 <strong>任务清单 (To-Do List)</strong>。</p>
<p>这份文档的核心目的是：<strong>教你如何在华为昇腾（Ascend/NPU）显卡上，配置并运行 <code>verl</code> 这个强化学习训练框架，同时使用 <code>sglang</code> 作为后端加速。</strong></p>
<p>简单来说，就是“<strong>华为显卡版 AI 训练环境搭建指南</strong>”。</p>
<p>以下是为您整理的执行步骤清单：</p>
<hr />
<h3>第一阶段：硬件与底层检查 (Checklist)</h3>
<p>在开始敲代码之前，必须确认你的机器符合硬性指标，否则后面都会报错。</p>
<ul>
<li>
<p>[ ] <strong>任务 1：确认显卡型号</strong></p>
<ul>
<li>检查你的服务器是否安装了以下华为昇腾芯片之一：<ul>
<li>Atlas 200T A2 Box16</li>
<li>Atlas 900 A2 PODc</li>
<li>Atlas 800T A3</li>
</ul>
</li>
<li><em>解读：如果你用的是 NVIDIA 显卡，这份文档不适合你。</em></li>
</ul>
</li>
<li>
<p>[ ] <strong>任务 2：核对底层软件版本（非常严格）</strong></p>
<ul>
<li><strong>Python</strong>: 必须是 3.11</li>
<li><strong>CANN (华为计算架构)</strong>: 必须是 8.3.RC1</li>
<li><strong>HDK (硬件开发套件)</strong>: 必须是 25.3.RC1</li>
<li><strong>PyTorch</strong>: 必须是 2.6.0</li>
<li><em>解读：文档特别强调了“仅支持上述版本”，这意味着版本号差一点都不行。如果你现在的环境不是这些版本，需要重装或升级。</em></li>
</ul>
</li>
</ul>
<hr />
<h3>第二阶段：核心软件安装 (Installation)</h3>
<p>如果环境没问题，接下来按顺序安装三个核心组件。</p>
<ul>
<li>
<p>[ ] <strong>任务 3：安装 SGLang (推理加速后端)</strong></p>
<ul>
<li><strong>操作</strong>：<ol>
<li>下载 <code>sglang</code> 源码。</li>
<li><strong>关键动作</strong>：替换配置文件（把 <code>pyproject_other.toml</code> 改名为 <code>pyproject.toml</code>）。这是为了适配华为 NPU 环境。</li>
<li>运行安装命令 <code>pip install -e "python[srt_npu]"</code>。</li>
</ol>
</li>
<li><em>目的：这是用来加速大模型推理计算的库。</em></li>
</ul>
</li>
<li>
<p>[ ] <strong>任务 4：安装 Torch Memory Saver (显存优化器)</strong></p>
<ul>
<li><strong>操作</strong>：<ol>
<li>下载 <code>sgl-kernel-npu</code> 源码。</li>
<li>运行脚本 <code>bash build.sh -a memory-saver</code> 进行编译。</li>
<li>安装编译好的 <code>.whl</code> 文件。</li>
</ol>
</li>
<li><em>目的：华为显卡的显存管理工具，防止训练时爆显存。</em></li>
</ul>
</li>
<li>
<p>[ ] <strong>任务 5：安装 Verl (训练框架本体)</strong></p>
<ul>
<li><strong>操作</strong>：<ol>
<li>下载 <code>verl</code> 源码。</li>
<li>安装 verl 本体。</li>
<li>安装针对 NPU 的依赖列表 <code>requirements-npu.txt</code>。</li>
</ol>
</li>
<li><em>目的：这是你要用的主程序，用来做强化学习训练的。</em></li>
</ul>
</li>
</ul>
<hr />
<h3>第三阶段：解决冲突与依赖 (Dependency Fix)</h3>
<p>安装完核心软件后，会有一些库冲突，需要手动清理。</p>
<ul>
<li>
<p>[ ] <strong>任务 6：清理不兼容的库</strong></p>
<ul>
<li><strong>操作</strong>：卸载 <code>torchvision</code>、<code>timm</code> 和 <code>triton</code>。</li>
<li><em>原因：文档提到目前还不支持多模态（处理图片），这些库会捣乱，所以要删掉。</em></li>
</ul>
</li>
<li>
<p>[ ] <strong>任务 7：安装指定版本的依赖</strong></p>
<ul>
<li><strong>操作</strong>：<ol>
<li>安装 <code>transformers</code> 版本 4.56.1。</li>
<li>安装华为专用的 Triton 编译器 <code>triton-ascend</code> (版本 3.2.0.dev...)。</li>
</ol>
</li>
<li><em>原因：SGLang 对这两个库的版本有严格要求，必须精准匹配。</em></li>
</ul>
</li>
</ul>
<hr />
<h3>第四阶段：验证与运行 (Run &amp; Verify)</h3>
<p>环境搭好了，最后跑一个实际的任务来验证是否成功。</p>
<ul>
<li>
<p>[ ] <strong>任务 8：准备数据</strong></p>
<ul>
<li><strong>操作</strong>：运行 <code>gsm8k.py</code> 脚本下载并处理数据。</li>
<li><em>目的：下载 GSM8K（一个数学数据集）并转换格式，为训练做准备。</em></li>
</ul>
</li>
<li>
<p>[ ] <strong>任务 9：开始训练 (Hello World)</strong></p>
<ul>
<li><strong>操作</strong>：运行官方提供的脚本 <code>run_qwen3_8b_grpo_sglang_1k_npu.sh</code>。</li>
<li><em>目的：使用 Qwen3-8B 模型跑一次 GRPO 算法的训练。如果这个脚本跑通了，没报错，说明你的环境彻底搭建成功了。</em></li>
</ul>
</li>
</ul>
<hr />
<h3>总结</h3>
<p>这篇文档其实就是告诉你：<strong>要在华为显卡上跑 Verl 框架，版本要求极其严格（CANN/Torch版本），并且需要手动编译安装 SGLang 和清理冲突库。</strong> 只要按着这个 List 一步步走，就能搞定。</p>