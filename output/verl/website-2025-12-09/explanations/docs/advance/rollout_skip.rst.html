<h1>docs/advance/rollout_skip.rst</h1>
<p>没问题，这份文档确实写得比较技术化。为了让你轻松理解，我们把它想象成你在玩一个<strong>“可以在存档点读取进度”的游戏</strong>，而不是每次都要从头开始打怪。</p>
<p>这个功能叫 <strong><code>RolloutSkip</code></strong>，简单来说就是：<strong>“跳过重复的生成过程，直接读取缓存”</strong>。</p>
<p>下面是一个由浅入深的 <strong>To-Do List</strong>，带你一步步拆解这份文档：</p>
<hr />
<h3>✅ 任务 1：理解“为什么要用它？”（概念篇）</h3>
<p><strong>文档对应部分：</strong> <code>Applicable Scenarios</code></p>
<ul>
<li><strong>背景知识：</strong> 在强化学习（RL）训练中，有一个步骤叫 <code>Rollout</code>（采样/生成）。模型需要花很多时间去生成数据（比如写一堆文本），这步通常最慢、最费时间。</li>
<li><strong>核心观点：</strong><ul>
<li>如果你经常用<strong>完全相同</strong>的配置反复跑实验；</li>
<li>或者你想节省时间，不想每次都重新生成一遍一模一样的数据；</li>
<li><strong>结论：</strong> 开启这个功能，系统会把生成过的数据存起来（Cache）。下次再跑，直接读硬盘里的文件，速度飞快。</li>
</ul>
</li>
</ul>
<hr />
<h3>✅ 任务 2：确认代码是否需要修改（代码篇）</h3>
<p><strong>文档对应部分：</strong> <code>2.1 Trainer Adaptation</code></p>
<ul>
<li><strong>你要做的事：</strong> 检查你用的训练器（Trainer）。</li>
<li><strong>核心观点：</strong><ul>
<li><strong>好消息：</strong> 如果你用的是官方提供的 <code>RayDAPOTrainer</code> 或 <code>RayPPOTrainer</code>，这部分<strong>不用你动手</strong>，官方已经改好了。</li>
<li><strong>坏消息（仅针对极客）：</strong> 如果你自己写了一个新的 Trainer 类，你需要模仿文档里的代码，把 <code>RolloutSkip</code> 这个功能加进去。</li>
<li><strong>代码逻辑解释：</strong><ol>
<li>引入这个工具包 (<code>import ... RolloutSkip</code>)。</li>
<li>在训练开始前，初始化它，并告诉它“请接管生成数据的过程” (<code>wrap_generate_sequences</code>)。</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr />
<h3>✅ 任务 3：学会如何开启开关（配置篇）</h3>
<p><strong>文档对应部分：</strong> <code>2.2 Basic Configuration</code></p>
<ul>
<li><strong>你要做的事：</strong> 在你的启动脚本或配置文件里加两行参数。</li>
<li><strong>核心观点：</strong><ol>
<li><strong>开启功能：</strong>
    <code>actor_rollout_ref.rollout.skip_rollout=True</code>
    （翻译：允许跳过生成步骤 = 是）</li>
<li><strong>指定存档位置：</strong>
    <code>actor_rollout_ref.rollout.skip_dump_dir="/tmp/rollout_dump"</code>
    （翻译：把缓存数据存在 <code>/tmp/rollout_dump</code> 这个文件夹里）</li>
</ol>
</li>
</ul>
<hr />
<h3>✅ 任务 4：避开常见的坑（注意事项篇）</h3>
<p><strong>文档对应部分：</strong> <code>Note</code></p>
<ul>
<li><strong>你要做的事：</strong> 仔细检查上面设置的那个路径和你的实验参数。</li>
<li><strong>核心观点（非常重要）：</strong><ol>
<li><strong>必须用绝对路径！</strong><ul>
<li>千万别写相对路径（比如 <code>./data</code>），必须写完整路径（比如 <code>/home/user/data</code>）。因为 Ray（分布式框架）在运行时会把任务分发到不同地方，写相对路径它会找不到文件。</li>
</ul>
</li>
<li><strong>文件名是自动生成的，很敏感！</strong><ul>
<li>系统会根据你的 <code>实验名</code>、<code>项目名</code>、<code>Batch Size</code> 等参数自动生成缓存文件夹的名字。</li>
<li><strong>后果：</strong> 只要你改了哪怕一个参数（比如把 Batch Size 从 64 改成 128），系统就会认为这是个新实验，之前的缓存就失效了，它会重新生成新的数据并存入新文件夹。</li>
</ul>
</li>
</ol>
</li>
</ul>
<hr />
<h3>总结（一句话人话版）</h3>
<p>这份文档就是告诉你：<strong>为了省时间，我们搞了个“缓存功能”。官方代码里已经装好了，你只要在配置文件里把开关打开 (<code>True</code>)，并给一个绝对路径存文件就行了。</strong></p>