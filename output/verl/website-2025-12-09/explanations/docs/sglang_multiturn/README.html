<h1>docs/sglang_multiturn</h1>
<p>这个文件夹 <code>docs/sglang_multiturn</code> 是关于 <strong>“如何训练一个能动手、会查资料、能多轮对话的 AI Agent”</strong> 的说明书合集。</p>
<p>如果把传统的 AI 训练比作“<strong>闭卷笔试</strong>”（只看题目，全靠脑补写答案），那么这个文件夹里的内容就是在教你如何搞一场“<strong>开卷实验考试</strong>”（允许 AI 使用工具、查书、跑代码，经过多轮尝试后得出最佳答案）。</p>
<p>以下是具体的通俗解读：</p>
<hr />
<h3>1. 这个文件夹主要负责什么？</h3>
<p><strong>核心功能：给强化学习（RL）训练加上“外挂”和“多轮对话”能力。</strong></p>
<p>以前训练模型，流程是：<code>提问 -&gt; 模型回答 -&gt; 打分</code>。
现在这个文件夹支持的流程是：<code>提问 -&gt; 模型想写代码/查搜索 -&gt; 系统帮它运行/搜索 -&gt; 把结果返给模型 -&gt; 模型根据结果调整 -&gt; 最终回答 -&gt; 打分</code>。</p>
<p>它让模型在训练过程中不再是“自言自语”，而是能和环境（代码解释器、搜索引擎、验证老师）进行<strong>即时互动</strong>。</p>
<hr />
<h3>2. 各个文件分别是干什么的？</h3>
<p>我把这四个文件比作搭建这个“开卷考试”考场的四个步骤：</p>
<ul>
<li>
<p><strong>📄 <code>interaction_system.rst</code> —— 考场规则手册</strong></p>
<ul>
<li><strong>作用</strong>：定义了“师生互动”的流程。</li>
<li><strong>比喻</strong>：这是教务处发的红头文件。它规定了：学生（模型）做一步，老师（系统）怎么批改？是做对了给糖吃，还是做错了打回重做？它管理着整个“做题-反馈-修正”的循环。</li>
</ul>
</li>
<li>
<p><strong>📄 <code>multiturn.rst</code> —— 录音笔与打分器</strong></p>
<ul>
<li><strong>作用</strong>：解决多轮对话中的技术难题，特别是怎么算分（Loss）。</li>
<li><strong>比喻</strong>：因为对话变长了（有了好几轮），我们不能把老师说的话（提示词）也算在学生的成绩里。这个文件教系统怎么把“历史记录”剪掉，只针对学生“新说出的那句话”进行打分（算梯度）。同时也教你怎么挂载各种工具（计算器、API）。</li>
</ul>
</li>
<li>
<p><strong>📄 <code>sandbox_fusion.rst</code> —— 安全实验室 (代码沙盒)</strong></p>
<ul>
<li><strong>作用</strong>：专门负责安全地运行 AI 写的代码。</li>
<li><strong>比喻</strong>：AI 可能会写出死循环或者删库跑路的代码。这个文件设计了一个“防爆实验室”（沙盒），把 AI 的代码扔到远程服务器去跑，跑完只把结果拿回来。既能让 AI 跑代码，又不会炸掉训练服务器。</li>
</ul>
</li>
<li>
<p><strong>📄 <code>search_tool_example.rst</code> —— 图书馆搭建指南</strong></p>
<ul>
<li><strong>作用</strong>：教你搭建一个本地的搜索引擎给 AI 用。</li>
<li><strong>比喻</strong>：这是一个实战教程。教你在隔壁房间架设一个“维基百科查询台”（Search Server），然后让正在考试的 AI 学会遇到不懂的题就去那个查询台查资料（RAG）。</li>
</ul>
</li>
</ul>
<hr />
<h3>3. 高层认知：一句话理解它的作用</h3>
<p><strong>这个文件夹就是为了把“大语言模型（LLM）”进化成“智能体（Agent）”而准备的训练基础设施。</strong></p>
<ul>
<li><strong>过去</strong>：你训练的是一个<strong>作家</strong>，他只能根据记忆写作。</li>
<li><strong>现在</strong>（有了这个文件夹）：你正在训练一个<strong>工程师</strong>，他不仅会写，还会用 Google 搜索、会写 Python 验证自己的想法、会根据报错修改代码，最后给你一个经得起推敲的答案。</li>
</ul>
<p>这个文件夹里的代码，就是支撑这位“工程师”在训练时能<strong>真正跑通</strong>这些工具调用的底层脚手架。</p>