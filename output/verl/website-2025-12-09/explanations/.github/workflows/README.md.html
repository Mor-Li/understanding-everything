<h1>.github/workflows/README.md</h1>
<p>这份文档其实是一份<strong>开发指南</strong>，专门写给在这个项目中<strong>想要添加新的自动化测试流程（CI Workflow）</strong>的程序员看的。</p>
<p>之所以你看着晕，是因为它涉及了 GitHub Actions（一种自动化工具）和云端资源的调度。简单来说，它的核心意思是：“如果你想加个自动测试脚本，得先选好用什么电脑跑，如果用我们的云端电脑，得按我的模板来。”</p>
<p>为了让你容易理解，我把这份文档拆解成一个 <strong>“添加新工作流（Workflow）的任务清单”</strong>，你只需要按这个步骤走，就能读懂文中的观点。</p>
<hr />
<h3>✅ 任务清单：如何添加一个新的自动化工作流</h3>
<h4>第一步：做个选择题（选电脑）</h4>
<p><strong>原文观点：</strong> <em>You have two runner options: a fixed runner or a machine from the vemlp.</em>
<strong>解释：</strong> 你的测试代码需要在一台电脑（Runner）上跑。你有两个选择：
1.  <strong>固定电脑（Fixed Runner）：</strong> 就像公司里的一台专用服务器。
    *   <em>怎么做？</em> 写代码时标记 <code>runs-on: [L20x8]</code> 即可。
2.  <strong>弹性电脑（Vemlp Runner）：</strong> 就像“共享汽车”，用的时候租一台，用完还回去。
    *   <em>怎么做？</em> 比较复杂，需要“租车-开车-还车”三个步骤（见下文）。</p>
<hr />
<h4>第二步：复制并修改模板（如果选了“弹性电脑”）</h4>
<p><strong>原文观点：</strong> <em>Here is a template to assist you... designed for using Vemlp machines.</em>
<strong>解释：</strong> 如果你选了第二种（弹性电脑），文档直接给了你一个 YAML 代码模板。你不需要从头写，直接复制这份代码，然后修改关键部分。</p>
<p><strong>核心修改点（Todo）：</strong>
1.  <strong>修改镜像（IMAGE）：</strong>
    *   找到 <code>env:</code> 下面的 <code>IMAGE</code>。
    *   把它改成你需要用的 Docker 镜像地址（比如你的代码运行环境）。
2.  <strong>填写具体任务（Job Steps）：</strong>
    *   找到 <code>your_job</code> 下面的 <code>steps: xxxx</code>。
    *   把 <code>xxxx</code> 换成你真正要执行的命令（比如 <code>python test.py</code>）。</p>
<hr />
<h4>第三步：理解“租车-开车-还车”的逻辑（关键！）</h4>
<p><strong>原文观点：</strong> <em>Currently, for each workflow, you need to create a <code>setup</code> and a <code>cleanup</code> job.</em>
<strong>解释：</strong> 这是这份文档最难懂的地方。它告诉你，用弹性电脑必须包含三个阶段（Jobs），模板里已经写好了逻辑：</p>
<ol>
<li><strong>Setup（租车）：</strong><ul>
<li>代码段：<code>jobs: setup</code></li>
<li>作用：调用接口（<code>volcengine/vemlp-github-runner</code> mode="create"）去云端申请一台机器。</li>
<li>产出：拿到这台机器的 ID (<code>task-id</code>) 和标签 (<code>runner-label</code>)。</li>
</ul>
</li>
<li><strong>Your Job（开车）：</strong><ul>
<li>代码段：<code>jobs: your_job</code></li>
<li>作用：这是你真正干活的地方。</li>
<li>注意：它会等待 <code>setup</code> 完成，并使用申请到的 <code>runner-label</code> 来指定在那台机器上运行。</li>
</ul>
</li>
<li><strong>Cleanup（还车）：</strong><ul>
<li>代码段：<code>jobs: cleanup</code></li>
<li>作用：不管任务成功还是失败（<code>if: always()</code>），最后都要调用接口（mode="destroy"）把机器销毁。</li>
<li><em>为什么重要？</em> 如果不销毁，机器一直开着会一直扣费。</li>
</ul>
</li>
</ol>
<hr />
<h4>第四步：搞定数据存放问题</h4>
<p><strong>原文观点：</strong> <em>Model and Dataset... pre-download dataset on a NFS...</em>
<strong>解释：</strong> 跑 AI 模型通常需要下载巨大的数据集。
*   <strong>问题：</strong> 如果每次跑测试都从网上下，太慢了，网络也不稳定。
*   <strong>解决方案：</strong> 这里的 CI 机器上挂载了一个网络硬盘（NFS），里面已经预先下好了数据。
*   <strong>Todo：</strong> 写代码时，不要去下载数据，直接读取以下路径：
    *   模型路径：<code>${HOME}/models</code>
    *   数据集路径：<code>${HOME}/models/hf_data</code></p>
<hr />
<h3>总结一下</h3>
<p>这份文档其实就说了三件事：
1.  <strong>选机器：</strong> 简单的用 Fixed，复杂的用 Vemlp。
2.  <strong>套模板：</strong> 用 Vemlp 必须遵守“申请 -&gt; 干活 -&gt; 销毁”的流程（模板已提供）。
3.  <strong>找数据：</strong> 别自己下载，去 <code>${HOME}/models</code> 找现成的。</p>