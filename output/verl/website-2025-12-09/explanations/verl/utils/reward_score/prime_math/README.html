<h1>verl/utils/reward_score/prime_math</h1>
<p>好的，这个文件夹 <code>prime_math</code> 其实就是为了解决一个核心痛点：<strong>AI 算对了，但写的方式跟标准答案不一样，怎么判分？</strong></p>
<p>比如标准答案是 <code>0.5</code>，AI 写了 <code>1/2</code>，或者 <code>\frac{1}{2}</code>，甚至 <code>0.50</code>。在普通电脑看来，这些字符串完全不一样，但在数学老师眼里，它们是一回事。</p>
<p>下面我用最通俗的比喻来回答你的三个问题：</p>
<h3>1. 当前这个文件夹主要负责什么功能？</h3>
<p>你可以把这个文件夹看作是一位 <strong>“极其严格但也极其聪明的数学阅卷老师”</strong>。</p>
<p>它的核心功能就是：<strong>“透过现象看本质”</strong>。
不管 AI 的字迹多么潦草（格式乱）、废话多么多（带单位、带解释），只要它算出来的<strong>数值</strong>或<strong>逻辑</strong>是对的，这位老师就能识别出来，并给它打满分。</p>
<hr />
<h3>2. 这个文件夹下的各个文件分别是干什么的？</h3>
<p>我们可以把这次阅卷过程想象成一个<strong>“流水线工厂”</strong>，每个文件就是一个车间主任：</p>
<h4>🧹 <code>math_normalize.py</code> —— “强迫症的清洗工”</h4>
<ul>
<li><strong>角色</strong>：负责把卷面弄干净。</li>
<li><strong>工作</strong>：不管 AI 写的是 <code>x = 5 kg</code> 还是 <code>5.0</code>，还是 <code>\text{5}</code>，他都会拿把剪刀，把“kg”、“x=”、“\text”这些没用的修饰统统剪掉，把 <code>1/2</code> 强行改成 <code>\frac{1}{2}</code>。</li>
<li><strong>口号</strong>：“别整那些花里胡哨的，给我最纯粹的数字！”</li>
</ul>
<h4>👨‍🏫 <code>grader.py</code> —— “拥有超级计算器的数学教授”</h4>
<ul>
<li><strong>角色</strong>：负责判断对错。</li>
<li><strong>工作</strong>：他拿着“清洗工”给的答案，先看一眼（字符串比对），如果长得不像，他就掏出超级计算器（SymPy 库）。<ul>
<li>比如：标准答案是 $x+y$，AI 写 $y+x$。</li>
<li>他会算：$(x+y) - (y+x) = 0$ 吗？如果是 0，那就是对的！</li>
</ul>
</li>
<li><strong>口号</strong>：“长得不像没关系，只要数学原理通顺，我就算你对。”</li>
</ul>
<h4>👮‍♂️ <code>__init__.py</code> —— “监考主任（总控）”</h4>
<ul>
<li><strong>角色</strong>：负责统筹全场。</li>
<li><strong>工作</strong>：<ol>
<li>先从 AI 的长篇大论中把答案抠出来（比如找 <code>\boxed{答案}</code>）。</li>
<li>把答案扔给“清洗工”处理。</li>
<li>把处理好的答案扔给“数学教授”打分。</li>
<li>最后盖章：通过 / 不通过。</li>
</ol>
</li>
</ul>
<hr />
<h3>3. 给我一个高层的认知（一句话总结）</h3>
<p>这部分代码的作用就是搭建了一座 <strong>“从文本世界通往数学世界的桥梁”</strong>。</p>
<ul>
<li><strong>没有它</strong>：判分只能靠“找茬”（字符串匹配），错一个标点符号都算错，AI 会很冤枉。</li>
<li><strong>有了它</strong>：判分变成了“懂行”（语义理解），它能理解 <code>1/2</code> 就是 <code>0.5</code>，让 AI 的数学能力评估更加真实、公平。</li>
</ul>