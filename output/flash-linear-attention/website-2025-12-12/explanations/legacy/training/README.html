<h1>legacy/training</h1>
<h1>legacy/training/ 目录说明</h1>
<p>欢迎来到 <strong><code>legacy/training</code></strong> 目录！这里是 <strong>Flame</strong> 项目的“老训练基地”。</p>
<p>虽然项目组已经搬到了更新、更强的仓库（基于 torchtitan），但这个文件夹完整保留了<strong>上一代</strong>训练 FLA（Flash Linear Attention）大模型的全套流水线。</p>
<hr />
<h3>1. 📍 这个文件夹主要负责什么？</h3>
<p><strong>核心功能：训练大模型的“旧工厂”。</strong></p>
<p>这里包含了一套完整的、从零开始训练大语言模型（LLM）的代码。它的任务很单一也很硬核：<strong>把海量的文本数据喂给计算机，让它学会说话。</strong></p>
<p>因为它是 <code>legacy</code>（遗产/旧版），你可以把它看作是一个<strong>“退役但依然能跑的经典款赛车引擎”</strong>。如果你想研究 FLA 模型早期的训练方式，或者需要复现旧的实验结果，就来这里。</p>
<hr />
<h3>2. 📄 直接文件分别是干什么的？</h3>
<p>如果不算子文件夹，这里摆在明面上的工具主要有三个，它们构成了训练的“三部曲”：</p>
<ul>
<li><strong>📄 <code>README.md</code> —— “工厂操作手册”</strong><ul>
<li><strong>作用</strong>：这是最重要的说明书。</li>
<li><strong>内容</strong>：它第一句话就警告你“我们搬家了”，然后详细教你如何安装环境、如何下载数据、以及如何启动训练。它是你的<strong>向导</strong>。</li>
</ul>
</li>
<li><strong>📄 <code>preprocess.py</code> —— “食材预处理机”</strong><ul>
<li><strong>作用</strong>：<strong>备菜</strong>。</li>
<li><strong>比喻</strong>：大模型是个大胃王，但它不能直接吃网上的原始文章。这个脚本负责把下载下来的乱七八糟的文本（raw text），清洗干净、切成整齐的小块，并转换成机器能消化的数字格式（Token IDs）。</li>
<li><strong>关键点</strong>：它会把很多短文章拼成一条长长的“贪吃蛇”，保证显卡每一口都吃得饱饱的，不浪费盘子空间。</li>
</ul>
</li>
<li><strong>📄 <code>run.py</code> —— “总控制台 / 点火按钮”</strong><ul>
<li><strong>作用</strong>：<strong>开火</strong>。</li>
<li><strong>比喻</strong>：当你把菜（数据）备好了，图纸（配置）选好了，就运行这个脚本。它会把所有东西组装起来，启动显卡，开始漫长的训练过程。它是整个工厂的<strong>主程序</strong>。</li>
</ul>
</li>
</ul>
<hr />
<h3>3. 📁 子文件夹的作用（概括）</h3>
<p>这里还有两个“仓库”，为上面的主程序提供支持：</p>
<ul>
<li><strong>📁 <code>configs/</code> —— “图纸档案馆”</strong><ul>
<li>存放各种模型的<strong>设计图纸</strong>（JSON文件）。你想练个小的（3.4亿参数）还是大的（70亿参数）？去这里拿对应的图纸。</li>
</ul>
</li>
<li><strong>📁 <code>flame/</code> —— “工具箱与后勤部”</strong><ul>
<li>存放训练所需的<strong>基础设施代码</strong>。比如怎么高效地从硬盘读数据、怎么记录训练日志、怎么解析复杂的命令参数。它是底层的支撑库。</li>
</ul>
</li>
</ul>
<hr />
<h3>🚀 4. 高层认知：一句话理解它</h3>
<p>你可以把 <code>legacy/training</code> 看作一条<strong>“标准的大模型训练流水线”</strong>：</p>
<blockquote>
<p><strong>原料（文本）</strong> ➡️ 经过 <strong><code>preprocess.py</code></strong> 加工 ➡️ 变成 <strong>半成品（数据包）</strong> ➡️ 输入 <strong><code>run.py</code></strong>（参考 <strong><code>configs/</code></strong> 的图纸） ➡️ 最终产出 <strong>成品（训练好的模型）</strong>。</p>
</blockquote>
<p>虽然它是旧版，但这套“备菜 -&gt; 烹饪”的逻辑是所有大模型训练通用的教科书式流程。</p>