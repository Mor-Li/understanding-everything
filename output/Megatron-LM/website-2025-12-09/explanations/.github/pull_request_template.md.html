<h1>.github/pull_request_template.md</h1>
<p>这份文件其实是一个 <strong>“代码提交说明书”</strong>（Pull Request Template）。</p>
<p>当你给这个开源项目（Megatron-LM）提交代码修改（也就是提 PR）的时候，GitHub 会自动把这段文字填在这个输入框里。它的作用是<strong>告诉你“在这个项目里，怎么做才能让你的代码被接受”</strong>。</p>
<p>为了让你更容易理解，我把它拆解成一个<strong>“通关任务清单” (To-Do List)</strong>。你只要按照这个顺序一步步做，就能看懂文中的要求了。</p>
<hr />
<h3>第一阶段：动手前的准备 (Pre-submission)</h3>
<p>在这一步，你还没正式提交代码，或者刚刚写完代码。文中开头和 <code>Pre-checks</code> 部分就在讲这个。</p>
<ul>
<li>
<p><strong>Task 1: 评估改动大小</strong></p>
<ul>
<li><em>文中依据:</em> <code>:warning: For major changes...</code></li>
<li><em>要做什么:</em> 问问自己，这次改动是不是很大（改了很多行代码，或者影响很大）？</li>
<li><em>行动:</em> 如果是，<strong>先别急着写代码</strong>，先写一个“设计文档” (design-doc) 找团队讨论。如果改动很小，跳过此步。</li>
</ul>
</li>
<li>
<p><strong>Task 2: 代码自我检查 (Pre-checks 清单)</strong></p>
<ul>
<li><em>文中依据:</em> <code>I have added relevant unit tests</code>, <code>autoformatter.sh</code> 等。</li>
<li><em>要做什么:</em><ol>
<li><strong>加测试:</strong> 必须要写单元测试和功能测试。</li>
<li><strong>加类型标注:</strong> Python 代码里要加上类型提示（Typing），就像 <code>def func(a: int) -&gt; str:</code> 这样。</li>
<li><strong>跑格式化工具:</strong> 运行项目自带的 <code>autoformatter.sh</code> 脚本，把代码格式整理得漂漂亮亮。</li>
<li><strong>写文档:</strong> 如果加了新功能，记得更新说明文档。</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr />
<h3>第二阶段：填写提交单 (Filling the PR)</h3>
<p>当你准备在 GitHub 上点击“Create Pull Request”时，你需要填写这个模板。</p>
<ul>
<li>
<p><strong>Task 3: 一句话概括</strong></p>
<ul>
<li><em>文中依据:</em> <code># What does this PR do ?</code></li>
<li><em>要做什么:</em> 在第一行写清楚：你这个 PR 到底是来干嘛的？（比如：“修复了加载模型时的内存泄漏bug”）。</li>
</ul>
</li>
<li>
<p><strong>Task 4: 勾选里程碑 (Milestone)</strong></p>
<ul>
<li><em>文中依据:</em> <code>I want this PR in a versioned release...</code></li>
<li><em>要做什么:</em> 在 GitHub 右侧边栏的 Milestone 选项里，选上你希望这个代码进哪个版本（比如 <code>Core 0.8</code>）。</li>
</ul>
</li>
</ul>
<hr />
<h3>第三阶段：审核通关 (The Review Process)</h3>
<p>这是文中篇幅最长、也是最核心的部分（<code>Code review</code> 章节）。这是一个<strong>两级审核制度</strong>。</p>
<ul>
<li>
<p><strong>Task 5: 第一关 —— 专家审核 (Expert Review)</strong></p>
<ul>
<li><em>文中依据:</em> <code>(Step 1): Add PR label Expert Review</code></li>
<li><em>要做什么:</em><ol>
<li>在 GitHub 右侧给你的 PR 打上一个标签（Label）：叫 <strong><code>Expert Review</code></strong>。</li>
<li>系统会自动分配懂这块代码的专家来看。</li>
<li><strong>等待</strong>。专家会提意见，你负责修改。</li>
</ol>
</li>
<li><em>通关条件:</em> 专家批准（Approve）、没有代码冲突、CI（自动测试）全部通过。</li>
</ul>
</li>
<li>
<p><strong>Task 6: 第二关 —— 最终审核 (Final Review)</strong></p>
<ul>
<li><em>文中依据:</em> <code>(Step 3): Final Review</code></li>
<li><em>注意:</em> 只有过了第一关才能进这里。</li>
<li><em>要做什么:</em><ol>
<li>给 PR 打上新标签：叫 <strong><code>Final Review</code></strong>。</li>
<li>系统会自动分配最终审核人（通常是项目大佬）。</li>
<li><strong>等待</strong>。如果大佬觉得没问题，就会批准。</li>
</ol>
</li>
</ul>
<p><em>(注：如果你是向 <code>dev</code> 分支提交，流程会简单点，只要 eharper 或 zijiey 这两个人同意就行，不需要这么复杂的两级审核。)</em></p>
</li>
</ul>
<hr />
<h3>第四阶段：合并与收尾 (Merge &amp; Post-Merge)</h3>
<p>代码审核通过后的操作。</p>
<ul>
<li>
<p><strong>Task 7: 合并代码 (Merge)</strong></p>
<ul>
<li><em>文中依据:</em> <code>Merging your PR</code></li>
<li><em>要做什么:</em> 你自己通常不能点合并按钮。你需要等 <code>core-adlr</code> 或 <code>core-nemo</code> 这两个团队的成员来帮你点击合并。</li>
</ul>
</li>
<li>
<p><strong>Task 8: (可选) 同步到旧版本 (Cherry-pick)</strong></p>
<ul>
<li><em>文中依据:</em> <code>(Optional Step 4): Cherry-pick</code></li>
<li><em>要做什么:</em> 如果你的这个修复非常重要，也需要应用到之前的发布版本（比如 <code>core_r0.7</code>）里，你需要在合并后，选择 <code>Cherry-pick</code> 功能，把这个改动“复制”一份提交到旧版本分支去。</li>
</ul>
</li>
</ul>
<hr />
<h3>总结一下流程图 (Mermaid chart)</h3>
<p>文中的那个图其实就是上面流程的浓缩版：</p>
<ol>
<li><strong>Pre-checks</strong> (你自己检查代码)</li>
<li><strong>PR Tests</strong> (机器自动测试)</li>
<li><strong>Expert Review</strong> (第一轮：技术专家看)</li>
<li><strong>Final Review</strong> (第二轮：把关人看)</li>
<li><strong>Merge</strong> (合并进代码库)</li>
</ol>
<p>现在你看这个文件，是不是清晰多了？它就是一份<strong>“如何让你的代码合入 NVIDIA Megatron-LM 库”的操作守则</strong>。</p>